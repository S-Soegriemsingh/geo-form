class FormController{#apiEndpoint="https://nominatim.openstreetmap.org/";#apiResponseLimit="limit=1";#apiResponseFormat="format=json";#apiResponseDetail="addressdetails=1";#country="country=nl";#housenumber=null;#postalcode=null;#xhrObject=null;#postalcodeElement=null;#housenumberElement=null;#responseElement=null;#checkElement=null;#submitElement=null;#validAddress=!1;constructor(){console.log("FormController - constructor"),this.prepareObjects(),this.prepareElements(),this.prepareEvents()}prepareObjects(){this.#xhrObject=new XMLHttpRequest,this.#xhrObject.onload=()=>{this.handleResponse(this.#xhrObject.response)}}prepareElements(){console.log("FormController - prepareElements"),this.#postalcodeElement=document.querySelector(".js-postalcode"),this.#housenumberElement=document.querySelector(".js-housenumber"),this.#responseElement=document.querySelector(".js-address"),this.#checkElement=document.querySelector(".js-postal-check"),this.#submitElement=document.querySelector(".js-submit-form")}prepareEvents(){console.log("FormController - prepareEvents"),this.#checkElement.addEventListener("click",e=>{this.handleCheckEvent(e)}),this.#submitElement.addEventListener("submit",e=>{this.handleSubmitEvent(e)})}handleCheckEvent(e){console.log("FormController - handleCheckEvent"),e.preventDefault(),this.validatePostalcode()&&this.validateHousenumber()?(this.#postalcode=this.#postalcodeElement.value,this.#housenumber=this.#housenumberElement.value):this.displayError("Vul een correcte postcode en huisnummer in."),this.sendRequest()}validatePostalcode(){return!(!/^[1-9][0-9]{3} ?(?!sa|sd|ss)[a-z]{2}$/i.test(postalcode.value)||!housenumber.value)}validateHousenumber(){return!!housenumber.value}sendRequest(){var e=this.#apiEndpoint+"?postalcode="+this.#postalcode+"&street="+this.#housenumber+"&"+this.#country+"&"+this.#apiResponseFormat+"&"+this.#apiResponseLimit+"&"+this.#apiResponseDetail;this.#xhrObject.open("GET",e),this.#xhrObject.send()}handleResponse(e){console.log("FormController - handleResponse");var e=JSON.parse(e);console.log("FormController - handleResponse jsonResponse",e),e.length?(e=e[0].address.city+" "+e[0].address.road,this.#responseElement.innerHTML=e,this.#validAddress=!0):(this.#validAddress=!1,this.displayError("Er ging iets mis met het ophalen van het adres, controleer de postcode en huisnummer en probeer het opnieuw."))}handleSubmitEvent(e){console.log("FormController - handleSubmitEvent"),e.preventDefault(),this.#validAddress?console.log("got here"):this.displayError("Het adres moet nog gecontroleerd worden.")}displayError(e){this.#responseElement.innerHTML=e}}document.addEventListener("DOMContentLoaded",()=>{new FormController});